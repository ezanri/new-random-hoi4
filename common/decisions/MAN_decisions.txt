@MAN_HUNT_BANDITS_EQUIPMENT_COST_TRIGGER = 499
@MAN_HUNT_BANDITS_EQUIPMENT_COST_EFFECT = -500

generic_economic_policies = {
	MAN_military_investments = {

		icon = generic_factory

		name = "Military Investments"

		available = {
			num_of_factories < 34
		}

		cost = 90
		ai_will_do = {
			factor = 1
		}
		days_remove = 180

		visible = {
			num_of_factories < 34
			original_tag = MAN
		}
		
		modifier = {
			production_speed_buildings_factor = 0.05
			production_speed_arms_factory_factor = 0.10
			political_power_factor = -0.20
		}
		remove_effect = {		
			add_war_support = 0.1		
		}		
	}

	MAN_underground_gun_workshops_dec = {

		icon = generic_industry

		name = "Underground Gun Workshops"

		available = {
			NOT = { has_idea = MAN_underground_gun_shops}
			has_war = yes
		}

		cost = 60
		ai_will_do = {
			factor = 1
		}
		days_remove = 60

		fire_only_once = yes
		visible = {
			NOT = { has_idea = MAN_underground_gun_shops}
			original_tag = MAN
		}
		remove_effect = {
			add_ideas = MAN_underground_gun_shops
			add_stability = -0.05	
		}
		modifier = {
			production_speed_buildings_factor = -0.15
			political_power_factor = -0.2
			command_power_gain_mult = -0.5
		}	
	}

	MAN_technological_advancement = {

		icon = generic_research

		name = "Technologic Advancement"

		available = {
			num_of_factories > 44
		}

		fire_only_once = yes

		cost = 25
		ai_will_do = {
			factor = 1
		}
		days_remove = 30

		visible = {
			original_tag = MAN
		}
		
		modifier = {
			production_speed_buildings_factor = -0.1
			research_speed_factor = -0.1
			political_power_factor = -0.25
		}
		remove_effect = {		
			add_stability = 0.1		
			add_research_slot = 1
		}		
	}
}

generic_military_policies = {
	MAN_mukden_academy = {

		icon = generic_military

		name = "Fund the Mukden Military Academy"

		available = {
			NOT = { has_idea = MAN_mukden_military_academy}
		}

		cost = 60
		ai_will_do = {
			factor = 1
		}
		days_remove = 60

		fire_only_once = yes
		visible = {
			NOT = { has_idea = MAN_mukden_military_academy}
			original_tag = MAN
		}
		remove_effect = {
			add_ideas = MAN_mukden_military_academy
			add_war_support = 0.05
			add_stability = -0.05	
		}
		modifier = {
			political_power_factor = -0.25
			command_power_gain_mult = -0.5
		}
		complete_effect = {			
		}		
	}

	MAN_imperial_divinity_dec = {

		icon = generic_speech

		name = "Imperial Divinity"

		available = {
		}

		cost = 60
		ai_will_do = {
			factor = 1
		}
		days_remove = 60

		fire_only_once = yes
		visible = {
			original_tag = MAN
		}
		remove_effect = {
			if = {
				limit = {
					NOT = { has_country_leader_with_trait = nationalist_symbol }
					is_subject = no
				}
				add_country_leader_trait = nationalist_symbol
			}
		}
		modifier = {
			political_power_factor = -0.20
		}
		complete_effect = {				
		}		
	}

	MAN_five_people_armies_dec = {

		icon = ITA_reorganize_ascari

		name = "Five People Armies"

		available = {
			NOT = { has_idea = MAN_five_people_armies}
		}

		cost = 60
		ai_will_do = {
			factor = 1
		}
		days_remove = 60

		fire_only_once = yes
		visible = {
			NOT = { has_idea = MAN_five_people_armies}
			original_tag = MAN
		}
		remove_effect = {
			add_ideas = MAN_five_people_armies
			add_war_support = 0.05
		}
		modifier = {
			political_power_factor = -0.20
		}
		complete_effect = {		
		}		
	}

	MAN_russian_advisers = {

		icon = generic_reorganize_irregulars

		name = "Invite Russian Advisers"

		available = {
			NOT = { has_idea = MAN_white_russian_advisers}
		}

		cost = 60
		ai_will_do = {
			factor = 1
		}
		days_remove = 60

		fire_only_once = yes
		visible = {
			NOT = { has_idea = MAN_white_russian_advisers}
			original_tag = MAN
		}
		remove_effect = {
			add_ideas = MAN_white_russian_advisers
		}
		modifier = {
			political_power_factor = -0.20
		}
		complete_effect = {				
		}		
	}
}


MAN_war_preparations = {
	MAN_raise_manchu_banner = {
		available = {
			has_war = yes
		}
		visible = {
			has_completed_focus = MAN_five_people_armies
			not = {
				has_country_flag = MAN_manchu_banner_raised
			}
		}
		cost = 25
		ai_will_do = {
			factor = 10
		}
		complete_effect = {
			division_template = {
				name = "Manchu Banner"
				priority = 1
				is_locked = yes
				division_names_group = MAN_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 0 y = 4 }

					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 1 y = 3 }
					infantry = { x = 1 y = 4 }

					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
					infantry = { x = 2 y = 3 }
					infantry = { x = 2 y = 4 }
				}
				support = {
					artillery = { x = 0 y = 0 }
				}
			}
			set_country_flag = MAN_manchu_banner_raised
			random_owned_controlled_state = {
				limit = { ROOT = { has_full_control_of_state = PREV } }
				prioritize = { 328 }
				create_unit = {
					division = "name = \"Yellow Banner \" division_template = \"Manchu Banner\" start_experience_factor = 0.5" 
					owner = MAN
				}
				create_unit = {
					division = "name = \"Red Banner \" division_template = \"Manchu Banner\" start_experience_factor = 0.5" 
					owner = MAN
				}
				create_unit = {
					division = "name = \"White Banner \" division_template = \"Manchu Banner\" start_experience_factor = 0.5" 
					owner = MAN
				}
				create_unit = {
					division = "name = \"Blue Banner \" division_template = \"Manchu Banner\" start_experience_factor = 0.5" 
					owner = MAN
				}
				create_unit = {
					division = "name = \"Black Banner \" division_template = \"Manchu Banner\" start_experience_factor = 0.5" 
					owner = MAN
				}
			}
		}
	}

	MAN_disband_the_banners = {
		available = { 

		}
		visible = {
			has_country_flag = MAN_manchu_banner_raised
		}
		cost = 0
		ai_will_do = {
			factor = 1
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		complete_effect = {
			delete_unit_template_and_units = { division_template = "Manchu Banner" }
			clr_country_flag = MAN_manchu_banner_raised
		}
	}
	MAN_divert_machine_tools = {
		available = {
			
		}
		visible = {
			has_completed_focus = MAN_request_control_of_the_railways
			not = {
				has_country_flag =  { 
					flag = MAN_machine_tools 
					value = 4
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 10
		}
		days_remove = 90
		remove_effect = {
			if = {
				limit = {
					not = {
						has_country_flag = MAN_machine_tools
					}
				}
				set_country_flag = {
					flag = MAN_machine_tools
					value = 1
				}
			}
			else = {
				modify_country_flag = {
					flag = MAN_machine_tools
					value = 1
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT 	
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	MAN_prepare_to_seize_arms = {
		available = {
			has_completed_focus = MAN_purge_the_general_affairs_council
			command_power > 29
		}
		visible = {
			has_completed_focus = MAN_purge_the_general_affairs_council
			check_variable = { var = MAN_seize_arms_prep value = 50 compare = less_than }
			is_subject_of = JAP
		}
		cost = 0
		ai_will_do = {
			factor = 10
		}
		complete_effect = {
			add_command_power = -30
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = less_than_or_equals }
				}
				custom_effect_tooltip = MAN_can_prepare_more_tt
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 10 compare = less_than }
				}
				set_variable = { var = MAN_seize_arms_prep value = 10 }
			}
			else = {
				add_to_variable = { var = MAN_seize_arms_prep value = 10 }
			}
		}
	}
	MAN_seize_arms = {
		available = {
			has_completed_focus = MAN_independence_war
			has_war_with = JAP
		}
		visible = {
			check_variable = { var = MAN_seize_arms_prep value = 0 compare = greater_than }
		}
		cost = 0
		fire_only_once = yes
		ai_will_do = {
			factor = 10
		}
		complete_effect = {
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = less_than_or_equals }
				}
				custom_effect_tooltip = MAN_can_prepare_more_tt
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 10 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 10000 producer = JAP }
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 20 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 10000 producer = JAP }
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 30 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 500 producer = JAP }
				if = {
					limit = {
						JAP = {
							has_tech = improved_infantry_weapons
						}
					}
					add_equipment_to_stockpile = { type = infantry_equipment_2 amount = 2000 producer = JAP }
				}
			}
			if = { #TODO_GABRIEL: fix tanks for dlc/nondlc
				limit = {
					NOT = {
						has_dlc = "No Step Back"
					}
					check_variable = { var = MAN_seize_arms_prep value = 40 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = light_tank_equipment_1 amount = 50 producer = JAP }
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 5000 producer = JAP }
			}
			else_if = { 
				limit = {
					has_dlc = "No Step Back"
					check_variable = { var = MAN_seize_arms_prep value = 40 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = light_tank_chassis_1 amount = 50 producer = JAP variant_name = "Type 95 Ha-Go"}
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 5000 producer = JAP }
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "By Blood Alone"
					}
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = JAP }
				if = {
					limit = {
						JAP = {
							has_tech = fighter1
						}
					}
					add_equipment_to_stockpile = { type = fighter_equipment_1 amount = 25 producer = JAP }
				}
				add_equipment_to_stockpile = { type = CAS_equipment_1 amount = 50 producer = JAP }
			}
			else_if = {
				limit = {
					has_dlc = "By Blood Alone"
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = greater_than_or_equals }
				}
				add_equipment_to_stockpile = { type = small_plane_airframe_0 amount = 100 producer = JAP variant_name = "Ki-10" }
				add_equipment_to_stockpile = { type = small_plane_cas_airframe_0 amount = 50 producer = JAP variant_name = "Ki-3"}
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 10 compare = greater_than_or_equals }
					check_variable = { var = MAN_seize_arms_prep value = 20 compare = less_than }
				}
				JAP = {
					add_timed_idea = { idea = MAN_arms_seized_1 days = 30 }
				}
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 20 compare = greater_than_or_equals }
					check_variable = { var = MAN_seize_arms_prep value = 30 compare = less_than }
				}
				JAP = {
					add_timed_idea = { idea = MAN_arms_seized_1 days = 60 }
				}
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 30 compare = greater_than_or_equals }
					check_variable = { var = MAN_seize_arms_prep value = 40 compare = less_than }
				}
				JAP = {
					add_timed_idea = { idea = MAN_arms_seized_2 days = 60 }
				}
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 40 compare = greater_than_or_equals }
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = less_than }
				}
				JAP = {
					add_timed_idea = { idea = MAN_arms_seized_2 days = 90 }
				}
			}
			if = {
				limit = {
					check_variable = { var = MAN_seize_arms_prep value = 50 compare = greater_than_or_equals }
					check_variable = { var = MAN_seize_arms_prep value = 60 compare = less_than }
				}
				JAP = {
					add_timed_idea = { idea = MAN_arms_seized_3 days = 90 }
				}
			}
		}
	}
}

prospect_for_resources = {

	MAN_develop_kirin_aluminium_deposits = { #328
		
		icon = aluminium

		allowed = {
			original_tag = MAN
		}

		available = {
			has_tech = excavation1
		}
		highlight_states = {
 highlight_state_targets = {
			state = 328
		} 
}

		visible = {
			has_completed_focus = MAN_develop_aluminum_sources
			controls_state = 328
			328 = {
				NOT = {
					has_state_flag = kirin_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			328 = { set_state_flag = kirin_aluminium_developed } 
			328 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}	
	}

	MAN_develop_liaotung_iron_ore_deposits = { #716
		
		icon = steel

		allowed = {

		}

		highlight_states = {
 highlight_state_targets = {
			state = 716
		} 
}

		available = {
			has_tech = construction2
			has_tech = excavation1
		}

		visible = {
			has_completed_focus = MAN_expand_showa_steel_works
			controls_state = 716
			716 = {
				NOT = {
					has_state_flag = liaotung_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			716 = { set_state_flag = liaotung_steel_developed }
			716 = {
				add_resource = {
					type = steel
					amount = 16
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}